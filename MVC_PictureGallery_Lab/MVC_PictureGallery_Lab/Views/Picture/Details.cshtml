@model MVC_PictureGallery_Lab.Models.PictureViewModel

<div class="container">
    <div class="row">
        <div class="col-xs-1 text-right"><span class="label label-success">Name</span></div>
        <div class="col-xs-10">@Model.Name</div>
    </div>
    <div class="row">
        <div class="col-xs-1 text-right"><span class="label label-success">Size</span></div>
        <div class="col-xs-10">@Model.Size byte</div>
    </div>
    <div class="row">
        <div class="col-xs-1 text-right"><span class="label label-success">Id</span></div>
        <div class="col-xs-10">@Model.Id</div>
    </div>
    <div class="row">
        <div class="col-md-offset-1 col-xs-12 ">
            <img src="@Model.Url" />
        </div>

        <div class="form-group">
            <div class="col-md-offset-1 col-md-10">
                <div>
                    @{
                        if (User.Identity.IsAuthenticated)
                        {
                            <span>@Html.ActionLink("Add Comment", "Create", "Comment", new { id = Model.Id }, null)</span>
                        }
                        else
                        {

                            <span>@Html.ActionLink("Login to Comment!", "Login", "Authentication", routeValues: null, htmlAttributes: new { id = "loginLink" })</span>
                        }
                    }


                </div>
            </div>
        </div>
        <div class="row">
            <h3>Comments</h3>
            @if (Model.Comments != null)
            {
                if (Model.Comments.Count > 0)
                {
                    for (var x = 0; x < @Model.Comments.Count; x++)
                    {
                        <ul>
                            <li>
                                <span>@Model.Comments[x].Text </span><span><small> -(@Model.Comments[x].Account.UserName)</small></span>
                                @{

                                    if (@Model.Comments[x].Account.UserName == User.Identity.Name)
                                    {
                                        var option = new AjaxOptions()
                                        {
                                            HttpMethod = "POST",
                                            InsertionMode = InsertionMode.Replace,
                                            UpdateTargetId = Model.Id.ToString()
                                        };
                                        <span id="@Model.Id">
                                            @*@Ajax.ActionLink("Delete", "Delete", "Comment", new { id = Model.Comments[x].Id }, null)*@
                                            @Ajax.ActionLink("Delete", "Delete","Comment",null, option,new { id = Model.Comments[x].Id });
                                        </span>
                                    }
                                }

                            </li>
                        </ul>
                                        }
                                    }
                                    else
                                    {<p>No comments!</p>};

            }
            else
            {
                                        <p>No comments!</p>
                                    }

        </div>
    </div>
</div>
